import axios from "axios";
import useAuth from "./useAuth";
// import { User } from "../../models/user";
const apiBaseUrl = `${process.env.REACT_APP_API}/refreshToken`;

const privateHeaderOptions = {
  "Content-Type": "application/json",
  Accept: "application/json",
  "access-token": `${localStorage.getItem("access-token")}`,
};

const useRefreshToken = () => {
  const { user } = useAuth();
  const refresh = async () => {
    const res = await axios.get(apiBaseUrl, {
      headers: privateHeaderOptions,
      withCredentials: true,
    });
    const newUser = {
      username: user.username,
      password: user.password,
      accessToken: res.data.accessToken,
    };
    return newUser.accessToken;
  };
  return refresh;
};

export default useRefreshToken;
